(this["webpackJsonpreact-firebase"]=this["webpackJsonpreact-firebase"]||[]).push([[0],{414:function(e,t,a){e.exports=a(530)},530:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(20),i=a.n(o),l=a(18),s=a.n(l),u=a(31),m=a(17),d=a(48),f=a(333),p=a(334),b=a(551),E=a(80),g=a.n(E),h={apiKey:"AIzaSyDxggzPT57iqEo-tohF6HqdpYj4YmIopnM",authDomain:"my-project-1486841534385.firebaseapp.com",databaseURL:"https://my-project-1486841534385.firebaseio.com",projectId:"my-project-1486841534385",storageBucket:"my-project-1486841534385.appspot.com",messagingSenderId:"1064996410450",appId:"1:1064996410450:web:bdb4a48fd567e062257b8b"},j=h.apiKey,y={webApiKey:j,signIn:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(j),Object(m.a)({},t,{returnSecureToken:!0}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signUp:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=".concat(j),Object(m.a)({},t,{returnSecureToken:!0}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=a(553),v=a(332),x=a(554),C=a(555),k=a(108),w=a(552),I=a(556),R=a(27),T=Object(v.a)((function(e){return{formContainer:{display:"flex",height:"30vh",width:"30%",flexDirection:"column",justifyContent:"space-around",alignItems:"center",margin:"20px auto"},actionsContainer:{display:"flex",justifyContent:"flex-end"}}})),D=function(){var e=Object(R.c)(),t=Object(r.useState)({email:"ayali@hotmail.com",password:"paris123"}),a=Object(d.a)(t,2),n=a[0],o=a[1],i=T(),l=Object(k.f)(),E=function(){var t=Object(u.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y.signIn(n);case 2:(a=t.sent)&&(e({type:"SET_USER",user:a.data}),l.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{className:i.formContainer,raised:!0},c.a.createElement("form",null,c.a.createElement(w.a,null,c.a.createElement(O.a,{container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(O.a,{item:!0},c.a.createElement(x.a,null)),c.a.createElement(O.a,{item:!0},c.a.createElement(f.a,{value:n.email,label:"Email Address",onChange:function(e){var t=e.target;o((function(e){return Object(m.a)({},e,{email:t.value})}))}}))),c.a.createElement(O.a,{container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(O.a,{item:!0},c.a.createElement(C.a,null)),c.a.createElement(O.a,{item:!0},c.a.createElement(f.a,{value:n.password,type:"password",label:"Password",onChange:function(e){var t=e.target;o((function(e){return Object(m.a)({},e,{password:t.value})}))}})))),c.a.createElement(I.a,{className:i.actionsContainer},c.a.createElement(p.a,{color:"secondary",onClick:function(){return o({email:"",password:""})}}," Reset "),c.a.createElement(p.a,{variant:"contained",color:"primary",onClick:E}," Login ")))))},S=a(67),A=a(558),L=a(336),U=a(61),M=a(262),N=a(378),F=a.n(N),B=a(381),P=a.n(B),_=a(380),V=a.n(_),z=a(379),W=a.n(z),J=a(195),K=a(337),q=a(268),Y=a.n(q),H=(a(531),h.projectId);Y.a.initializeApp(h);var G=Y.a.storage(),Q=function(e){return n=e,{projId:H,importFrom:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createRecord:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.post("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,".json?auth=").concat(t.idToken),a);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),updateRecord:function(){var e=Object(u.a)(s.a.mark((function e(t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.put("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,"/").concat(a,".json?auth=").concat(t.idToken),r);case 2:return e.abrupt("return",Object(m.a)({},r,{id:a}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),deleteRecord:function(){var e=Object(u.a)(s.a.mark((function e(t,a,r){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,"/").concat(a,".json?auth=").concat(t.idToken));case 2:return e.abrupt("return",Object(m.a)({},r,{id:a}));case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),deleteTable:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.delete("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,".json?auth=").concat(t.idToken));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRecord:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,"/").concat(a,".json?auth=").concat(t.idToken));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getRecords:function(){var e=Object(u.a)(s.a.mark((function e(t,a){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.get("https://".concat(H,".firebaseio.com/").concat(t.localId,"/").concat(n,".json?auth=").concat(t.idToken));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),getImageUrl:function(){var e=Object(u.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.ref("images").child(t).getDownloadURL();case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}},X=Object(v.a)((function(e){return{links:{flexGrow:1,display:"flex",alignItems:"center",justifyContent:"space-around"},link:{color:"white",textDecoration:"none"}}})),Z=function(){var e=Object(R.d)((function(e){return e.user})),t=Object(R.d)((function(e){return e.tables})),a=Object(R.c)(),n=e&&e.idToken,o=Q("table");Object(r.useEffect)((function(){function r(){return(r=Object(u.a)(s.a.mark((function r(){var c,i,l,u,d;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n||0!==Object.keys(t).length){r.next=15;break}return r.next=3,o.getRecords(e);case 3:if(!(c=r.sent).data){r.next=15;break}i=Object.keys(c.data),l=i.map((function(e){return Object(m.a)({},c.data[e],{firebaseId:e})})),u=s.a.mark((function t(a){var n,r,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Q("table".concat(l[a].firebaseId,"-column").toLowerCase()),t.next=3,n.getRecords(e);case 3:(r=t.sent).data&&(c=Object.keys(r.data),o=c.map((function(e){return Object(m.a)({},r.data[e],{firebaseId:e})})),l[a].fields=o);case 5:case"end":return t.stop()}}),t)})),d=0;case 9:if(!(d<l.length)){r.next=14;break}return r.delegateYield(u(d),"t0",11);case 11:d++,r.next=9;break;case 14:a({type:"SET_TABLES",tables:l});case 15:case"end":return r.stop()}}),r)})))).apply(this,arguments)}!function(){r.apply(this,arguments)}()}),[a,e,n,o,t]);var i=X(),l=c.a.useState(null),f=Object(d.a)(l,2),p=f[0],b=f[1],E=c.a.useState(null),g=Object(d.a)(E,2),h=g[0],j=g[1],y=function(){j(null)};return c.a.createElement(A.a,{position:"static"},c.a.createElement(L.a,null,c.a.createElement(M.a,{edge:"start",color:"inherit","aria-label":"menu"},c.a.createElement(F.a,null)),c.a.createElement("div",{className:i.links},n&&c.a.createElement(S.b,{to:"/",className:i.link},c.a.createElement(U.a,{variant:"button"},"Home")),n&&Object.keys(t).length>0&&Object.keys(t).map((function(e){return c.a.createElement(S.b,{to:"/table/".concat(t[e].name.toLowerCase()),className:i.link},c.a.createElement(U.a,{variant:"button"},t[e].name))}))),!n&&c.a.createElement(S.b,{to:"/signin",className:i.link},c.a.createElement(U.a,{variant:"button"},"Login")),n&&c.a.createElement(c.a.Fragment,null,c.a.createElement(M.a,{edge:"end",color:"inherit"},c.a.createElement(W.a,null)),c.a.createElement(M.a,{edge:"end",color:"inherit",onClick:function(e){j(e.currentTarget)}},c.a.createElement(V.a,null)),c.a.createElement(J.a,{anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:y},c.a.createElement(K.a,{onClick:y},c.a.createElement(S.b,{to:"/table"},"Tables")),c.a.createElement(K.a,{onClick:y},c.a.createElement(S.b,{to:"/admin"},"Settings"))),c.a.createElement(M.a,{edge:"end",color:"inherit",onClick:function(e){b(e.currentTarget)}},c.a.createElement(P.a,null)),c.a.createElement(J.a,{anchorEl:p,keepMounted:!0,open:Boolean(p),onClose:function(){b(null)}},c.a.createElement(K.a,{onClick:function(){b(null)}},c.a.createElement(S.b,{to:"/profile"},"Profile")),c.a.createElement(K.a,{onClick:function(){}},"Logout")))))},$=a(559),ee=a(138),te=Object(v.a)((function(e){return{mainContainer:{width:"80%",height:"50vh",margin:"30px auto",display:"flex",justifyContent:"space-around",alignItems:"center"},message:{width:"100%",height:"100%",display:"flex",justifyContent:"space-around",alignItems:"center"}}})),ae=function(){var e=Object(R.d)((function(e){return e.user})),t=e&&e.idToken,a=te(),n=Q();return c.a.createElement($.a,{className:a.mainContainer},c.a.createElement(ee.a,{elevation:5,className:a.message},!t&&c.a.createElement(U.a,null,"Welcome to Keepy! Web API Key ",y.webApiKey,", ProjId: ",n.projId),t&&c.a.createElement(U.a,{color:"primary"},"Welcome, ".concat(e.localId," [aka: ").concat(e.email,"]"))))},ne=function(e){var t=e.fbUser,a=e.onEnableImport,n=Q("company"),r=Q("yacht");return c.a.createElement(c.a.Fragment,null,c.a.createElement(p.a,{color:"primary",onClick:function(){n.deleteTable(t)}},"Delete Companies"),c.a.createElement(p.a,{color:"primary",onClick:function(){r.deleteTable(t)}},"Delete Yachts"),c.a.createElement(p.a,{color:"primary",onClick:function(){a()}},"Enable Import"))},re={name:"profile",fields:[{name:"name",label:"Name",summary:1},{name:"email",type:"email",summary:2},{name:"phone",type:"tel",summary:3},{name:"notes",type:"textarea"}]},ce=a(563),oe=a(564),ie=a(565),le=a(566),se=a(562),ue=a(384),me=a.n(ue),de=a(270),fe=a.n(de),pe=a(385),be=a.n(pe),Ee=a(386),ge=a.n(Ee),he=a(99),je=a(338),ye=a(561),Oe=a(560),ve=Object(v.a)({mainContainer:{borderRadius:"8px",position:"relative",width:"210px",height:"210px",display:"flex",justifyContent:"center",alignItems:"center",padding:"10px"},imgContainer:{width:"200px",height:"200px"},pickImage:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"blue",fontSize:"0.8em"},progress:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),xe=function(e,t){var a,n=Object(r.useState)(e),o=Object(d.a)(n,2),i=o[0],l=o[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),m=u[0],f=u[1],p=Object(r.useState)(!1),E=Object(d.a)(p,2),g=E[0],h=E[1],j=ve();return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{className:j.mainContainer,onMouseOver:function(){return h(!0)},onMouseLeave:function(){return h(!1)}},c.a.createElement(w.a,null,c.a.createElement("img",{src:i,alt:i||"image",className:j.imgContainer,style:{display:i?"block":"none"}}),c.a.createElement(Oe.a,{href:"#",className:j.pickImage,style:{display:g?"block":"none"},onClick:function(){return a.click()}},"Change Image"),c.a.createElement("div",{className:j.progress,style:{display:m?"block":"none"}},m))),c.a.createElement("input",{type:"file",onChange:function(e){if(e.target.files[0]){var t=e.target.files[0];l(""),G.ref("images/".concat(t.name)).put(t).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100)+"%";f(t),"100%"===t&&setTimeout((function(){f("")}),2e3)}),(function(e){console.log("error"),console.log(e)}),(function(){G.ref("images").child(t.name).getDownloadURL().then((function(e){l(e)}))}))}},style:{display:"none"},ref:function(e){return a=e}}))},Ce=function(e){var t=e.field,a=e.mode,n=e.onChange,r=e.onBlur,o=e.value;return c.a.createElement(c.a.Fragment,null,["text","tel","email"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(f.a,{fullWidth:!0,type:t.type,name:t.name,label:t.label,autoFocus:t.autoFocus,disabled:2===a||t.isReadOnly,onChange:n,onBlur:r,value:o,autoComplete:"off"}),c.a.createElement(he.a,{name:t.name,component:"div"})),["textarea"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(f.a,{fullWidth:!0,type:t.type,name:t.name,label:t.label,multiline:!0,rowsMax:4,autoFocus:t.autoFocus,disabled:2===a||t.isReadOnly,onChange:n,onBlur:r,value:o}),c.a.createElement(he.a,{name:t.name,component:"div"})),["number"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(f.a,{type:t.type,name:t.name,label:t.label,autoFocus:t.autoFocus,disabled:2===a||t.isReadOnly,onChange:n,onBlur:r,value:o}),c.a.createElement(he.a,{name:t.name,component:"div"})),["date"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(f.a,{type:t.type,name:t.name,label:t.label,autoFocus:t.autoFocus,disabled:2===a||t.isReadOnly,onChange:n,onBlur:r,value:o,InputLabelProps:{shrink:!0}}),c.a.createElement(he.a,{name:t.name,component:"div"})),["checkbox"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(je.a,{control:c.a.createElement(ye.a,{checked:o,onChange:n,name:t.name,color:"primary",disabled:2===a||t.isReadOnly}),label:t.label}),c.a.createElement(he.a,{name:t.name,component:"div"})),["file"].includes(t.type)&&c.a.createElement(O.a,{item:!0,xs:4},c.a.createElement(xe,{name:t.name,disabled:2===a||t.isReadOnly,initialUrl:o,onUrlChanged:function(e){}}),c.a.createElement("div",null,o," ",JSON.stringify(o)),c.a.createElement(he.a,{name:t.name,component:"div"})))},ke=Object(v.a)((function(e){return{formContainer:{width:"90%",margin:"25px auto"},cardTitle:{textAlign:"left",fontSize:"2em",backgroundColor:"silver"},actionsContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px",backgroundColor:"silver"},actionsContainerTopMain:{width:"50%",padding:"10px"},actionsContainerTopButtons:{display:"flex",justifyContent:"space-between",alignItems:"center"}}}));function we(e){var t=e.toLowerCase();return t.includes("int")?"number":t.includes("bit")?"checkbox":"text"}var Ie=function(e){var t=e.mode,a=e.model,n=e.initialInputRecord,o=e.onAdded,i=e.onUpdated,l=e.onDeleted,E=e.onCancelled,g=Object(r.useState)({importDMLOpen:!1,importJSONOpen:!1}),h=Object(d.a)(g,2),j=h[0],y=h[1],v=ke(),x=Q(a.name.toLowerCase()),C=function(e){switch(e){case 1:return"Create "+a.name;case 2:return"Delete "+a.name;case 3:return"Update "+a.name}},k=Object(R.d)((function(e){return e.user})),T="",D=function(){var e=Object(u.a)(s.a.mark((function e(){var t,a,r,c,o,i,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=T.split("\n"),a=0;a<t.length;a++)r=/(\w*?)\s(\w*)/g.exec(t[a])||[],c=Object(d.a)(r,3),o=c[1],i=c[2],o&&((l={initialInputRecord:n}).name=o.substring(0,1).toLowerCase()+o.substring(1),l.label=o,l.type=we(i),x.createRecord(k,l));y(Object(m.a)({},j,{importDMLOpen:!1}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,c.a.createElement(he.b,{initialValues:n,onSubmit:function(){var e=Object(u.a)(s.a.mark((function e(r,c){var u,d,f,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=c.setSubmitting,d={},a.fields.forEach((function(e){return d[e.name]=r[e.name]})),1!==t){e.next=10;break}return e.next=6,x.createRecord(k,d);case 6:f=e.sent,o(Object(m.a)({},r,{firebaseId:f.data.name})),e.next=24;break;case 10:if(2!==t){e.next=20;break}return e.next=13,x.deleteRecord(k,n.firebaseId,d);case 13:if(!a.childfields){e.next=17;break}return p=Q("".concat(a.name,"-").concat(a.childmodel).concat(n.firebaseId).toLowerCase()),e.next=17,p.deleteTable(k);case 17:l(r),e.next=24;break;case 20:if(3!==t){e.next=24;break}return e.next=23,x.updateRecord(k,n.firebaseId,d);case 23:i(r);case 24:u(!1);case 25:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},(function(e){var n=e.values,r=(e.errors,e.touched,e.handleChange),o=e.handleBlur,i=e.handleSubmit,l=e.isSubmitting;return c.a.createElement("form",{onSubmit:i},c.a.createElement(b.a,{raised:!0,className:v.formContainer},c.a.createElement(se.a,{className:v.cardTitle,title:C(t),subheader:"".concat(n.firebaseId)||"",action:c.a.createElement(fe.a,{color:"secondary",onClick:E})}),c.a.createElement(w.a,null,c.a.createElement(O.a,{container:!0,spacing:3},a.fields.map((function(e){return c.a.createElement(Ce,{key:e.name,field:e,value:n[e.name],mode:t,onChange:r,onBlur:o})})))),c.a.createElement(I.a,{className:v.actionsContainer},c.a.createElement("div",null,c.a.createElement(p.a,{type:"button",disabled:l,color:"secondary",onClick:function(){return y(Object(m.a)({},j,{importJSONOpen:!0}))}},"Import JSON"),c.a.createElement(p.a,{type:"button",disabled:l,color:"secondary",onClick:function(){return y(Object(m.a)({},j,{importDMLOpen:!0}))}},"Import DML")),c.a.createElement("div",null,c.a.createElement(p.a,{type:"button",disabled:l,variant:"contained",color:"secondary",onClick:E,startIcon:c.a.createElement(fe.a,null)},"Cancel"),1===t&&c.a.createElement(p.a,{type:"submit",disabled:l,variant:"contained",color:"primary",startIcon:c.a.createElement(me.a,null)},"Create"),2===t&&c.a.createElement(p.a,{type:"submit",disabled:l,variant:"contained",color:"secondary",startIcon:c.a.createElement(be.a,null)},"Delete"),3===t&&c.a.createElement(p.a,{type:"submit",disabled:l,variant:"contained",color:"primary",startIcon:c.a.createElement(ge.a,null)},"Save")))))})),c.a.createElement(ce.a,{open:j.importDMLOpen,onClose:function(){return y(Object(m.a)({},j,{importDMLOpen:!1}))},style:{width:"90%"}},c.a.createElement(oe.a,null,"Import columns"),c.a.createElement(ie.a,{dividers:!0},c.a.createElement(f.a,{label:"Names",autoFocus:!0,fullWidth:!0,multiline:!0,required:!0,rows:"10",variant:"outlined",onChange:function(e){T=e.target.value}})),c.a.createElement(le.a,null,c.a.createElement(p.a,{color:"primary",onClick:D},"Import"))))},Re=a(158),Te=a(392),De=a.n(Te),Se=a(402),Ae=a.n(Se),Le=a(393),Ue=a.n(Le),Me=a(400),Ne=a.n(Me),Fe=a(273),Be=a.n(Fe),Pe=a(272),_e=a.n(Pe),Ve=a(394),ze=a.n(Ve),We=a(395),Je=a.n(We),Ke=a(397),qe=a.n(Ke),Ye=a(398),He=a.n(Ye),Ge=a(399),Qe=a.n(Ge),Xe=a(403),Ze=a.n(Xe),$e=a(396),et=a.n($e),tt=a(401),at=a.n(tt),nt=a(404),rt=a.n(nt),ct=a(405),ot=a.n(ct),it=a(387),lt=a.n(it),st=a(75),ut=a.n(st),mt={Add:Object(r.forwardRef)((function(e,t){return c.a.createElement(De.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ue.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return c.a.createElement(_e.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return c.a.createElement(ze.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return c.a.createElement(Be.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return c.a.createElement(Je.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return c.a.createElement(et.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return c.a.createElement(qe.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(He.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Qe.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Be.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return c.a.createElement(_e.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return c.a.createElement(at.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ze.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return c.a.createElement(rt.a,Object.assign({},e,{ref:t}))})),MoreDetails:Object(r.forwardRef)((function(e,t){return c.a.createElement(ot.a,Object.assign({},e,{ref:t}))}))},dt=Object(v.a)((function(e){return{toolbarContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px"},importButton:{alignSelf:"stretch",textTransform:"none"},importUrlField:{width:"30%"},importChip:{width:"30%",backgroundColor:"Teal",boxShadow:"2px 2px silver",padding:"10px",color:"white",borderRadius:"16px",fontSize:"0.8em",textAlign:"center"}}})),ft=function(e){var t=e.model,a=e.records,n=e.onAdd,r=e.onDelete,o=e.onUpdate,i=e.onImport,l=e.importMessage,s=e.onImportUrlChange,u=e.onModelChange,m=ut.a.filter(t.fields,(function(e){return!!e.summary})),d=ut.a.orderBy(m,["summary",["asc"]]).map((function(e){return{title:e.label,field:e.name}})),b=dt();return c.a.createElement(c.a.Fragment,null,l&&c.a.createElement("div",{className:b.toolbarContainer},c.a.createElement(f.a,{className:b.importUrlField,onChange:s,label:"Import url"}),c.a.createElement("div",{className:b.importChip}," ",l," "),c.a.createElement(p.a,{onClick:i,color:"secondary",className:b.importButton},"Import")),c.a.createElement(lt.a,{icons:mt,title:t.pluralName,columns:d,data:a,actions:[{icon:mt.Add,tooltip:"Add "+t.name,isFreeAction:!0,onClick:function(e){return n()}},{icon:mt.MoreDetails,tooltip:"Details "+t.name,onClick:function(e,t){u(t)}},{icon:mt.Edit,tooltip:"Edit "+t.name,onClick:function(e,t){o(t)}},{icon:mt.Delete,tooltip:"Delete "+t.name,iconProps:{style:'color: "red"'},onClick:function(e,t){r(t)}}],options:{actionsColumnIndex:-1,grouping:!1,exportButton:!0},localization:{body:{emptyDataSourceMessage:"No ".concat(t.name,"s to display, import or add ").concat(t.name,"s by clicking the plus sign above.")}}}))},pt=a(406),bt=a.n(pt),Et=function(e){var t=e.model,a=e.initialMode,n=e.onModelChange,o=e.onRecordAdded,i=e.onRecordDeleted,l=e.onRecordUpated,f=Object(r.useState)({importMessage:"",importUrl:"",records:[],selectedRecord:{},mode:a}),p=Object(d.a)(f,2),b=p[0],E=p[1];t=gt(t);var g=Object(R.d)((function(e){return e.user})),h=Q(t.name.toLowerCase()),j=function(e){var t={};e&&e.fields&&e.fields.forEach((function(e){t[e.name]=e.defaultValue}));return t}(t);if(Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(s.a.mark((function e(){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ht(b,t,g)){e.next=5;break}return e.next=3,h.getRecords(g);case 3:(a=e.sent)&&a.data&&(n=Object.keys(a.data),r=n.map((function(e){return Object(m.a)({},a.data[e],{firebaseId:e})})),E(Object(m.a)({},b,{records:r})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g,h,b,t,j]),!t)return null;var y=function(){var e=Object(u.a)(s.a.mark((function e(){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,b.importUrl){e.next=3;break}return e.abrupt("return",E(Object(m.a)({},b,{importMessage:"Please enter import url..."})));case 3:return e.next=5,h.importFrom(b.importUrl);case 5:return e.next=7,e.sent.data;case 7:a=e.sent,E(Object(m.a)({},b,{importMessage:"Found ".concat(a.length," ").concat(t.name," records. Importing...")})),a.forEach((function(e){setTimeout((function(){var a={};Object.keys(e).forEach((function(n){var r=n.replace("_","").toLowerCase(),c=ut.a.find(t.fields,(function(e){return e.name.toLowerCase()===r}));c&&c.name&&("date"===c.type?a[c.name]=new Date(e[n]).toISOString().substring(0,10):a[c.name]=e[n])})),h.createRecord(g,a),E(Object(m.a)({},b,{importMessage:"Importing ".concat(t.name," record# ").concat(a[t.fields[0].name]),records:[].concat(Object(Re.a)(b.records),[a])}))}),2e3)})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),E(Object(m.a)({},b,{importMessage:e.t0.message}));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,b.mode?c.a.createElement(Ie,{mode:b.mode,model:t,initialInputRecord:b.selectedRecord,onAdded:function(e){E(Object(m.a)({},b,{mode:0,records:[].concat(Object(Re.a)(b.records),[e])})),o(e)},onDeleted:function(e){var t=b.records.filter((function(t){return t.firebaseId!==e.firebaseId}));E(Object(m.a)({},b,{mode:0,records:t})),i(e)},onUpdated:function(e){var t=b.records.map((function(t){return t.firebaseId===e.firebaseId?e:t}));E(Object(m.a)({},b,{mode:0,records:t})),l(e)},onCancelled:function(){E(Object(m.a)({},b,{mode:0}))}}):c.a.createElement(ft,{model:t,records:b.records,onAdd:function(){E(Object(m.a)({},b,{mode:1,selectedRecord:j}))},onDelete:function(e){E(Object(m.a)({},b,{mode:2,selectedRecord:e}))},onUpdate:function(e){E(Object(m.a)({},b,{mode:3,selectedRecord:e}))},onImport:y,importMessage:b.importMessage,onImportUrlChange:function(e){E(Object(m.a)({},b,{importUrl:e.target.value}))},onModelChange:function(e){E(Object(m.a)({},b,{records:[]})),n(e.firebaseId)}}))};function gt(e){if(!e||!e.name||!e.fields)return null;if(e.processed)return e;(e.name=e.name[0].toUpperCase()+e.name.toLowerCase().substring(1),e.pluralName=bt()(e.name),e.sqlFields)&&(e.fields||(e.fields=[]),e.sqlFields.split("\n").forEach((function(t){var a=t.replace(/ /g,"").split("\t"),n=a[0][0].toLowerCase()+a[0].substring(1),r=a[0],c="";a[1].includes("char")?c="text":a[1].includes("bit")?c="checkbox":a[1].includes("datetime")?c="date":(a[1].includes("int")||a[1].includes("money")||a[1].includes("decimal"))&&(c="number");var o=ut.a.find(e.fields,(function(e){return e.name===a[0]}));o?(o.label=r,o.type=c,o.name=n):e.fields.push({name:n,label:r,type:c})})));return e.fields=e.fields.map((function(e){var t=e.label||e.name[0].toUpperCase()+e.name.substring(1),a=e.type||"text",n=e.summary||0,r=e.defaultValue||"",c=e.readonly||!1;return Object(m.a)({},e,{label:t,type:a,summary:n,readonly:c,defaultValue:r})})),e.fields.some((function(e){return e.summary}))||(e.fields[0].summary=1),e.fields.some((function(e){return e.autoFocus}))||(e.fields[0].autoFocus=!0),e.processed=!0,e}function ht(e,t,a){return 0===e.records.length&&(!e.mode||0===e.mode)&&a&&t&&t.fields}var jt=Object(k.g)((function(e){var t=e.fbUser,a=gt(re);return c.a.createElement(Ie,{mode:3,model:a,initialInputRecord:{firebaseId:"default"},fbUser:t,onUpdated:function(){},onCancelled:function(){}})})),yt=a(221),Ot=function(e){var t=e.component,a=e.restricted,n=Object(yt.a)(e,["component","restricted"]),r=Object(R.d)((function(e){return e.user})),o=r&&r.idToken;return c.a.createElement(k.b,Object.assign({},n,{render:function(e){return o&&a?c.a.createElement(k.a,{to:"/"}):c.a.createElement(t,e)}}))},vt=function(e){var t=e.component,a=Object(yt.a)(e,["component"]),n=Object(R.d)((function(e){return e.user})),r=n&&n.idToken;return c.a.createElement(k.b,Object.assign({},a,{render:function(e){return r?c.a.createElement(t,e):c.a.createElement(k.a,{to:"/signin"})}}))},xt={name:"table",child:"column",fields:[{name:"name",label:"Table name"},{name:"child",label:"Child name"},{name:"enabled",label:"Active",type:"checkbox",defaultValue:!0}]},Ct={name:"column",fields:[{name:"name",label:"Name",summary:1},{name:"type",label:"Type",summary:2},{name:"label",label:"Label",summary:3},{name:"defaultValue",label:"Default Value",summary:4},{name:"summary",label:"List Order",summary:5}]},kt=function(){var e=Object(r.useState)({model:xt}),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(R.c)();return c.a.createElement(Et,{model:a.model,onModelChange:function(e){a.model.child&&"column"===a.model.child&&(Ct.name="".concat(a.model.name).concat(e,"-").concat(a.model.child),n({model:Ct}))},onRecordDeleted:function(e){o({type:"DELETE_TABLE",table:e})},onRecordAdded:function(e){o({type:"ADD_TABLE",table:e})},onRecordUpated:function(e){o({type:"UPDATE_TABLE",table:e})}})},wt=function(e){var t=e.match.params.tableName,a=Object(R.c)(),n=Object(R.d)((function(e){return e.tables})),r=ut.a.find(n,(function(e){return e.name.toLowerCase()===t.toLowerCase()}));return r.name?c.a.createElement(Et,{model:r,onModelChange:function(e){r.child},onRecordDeleted:function(e){a({type:"DELETE_DATA",table:e})},onRecordAdded:function(e){a({type:"ADD_DATA",table:e})},onRecordUpated:function(e){a({type:"UPDATE_DATA",table:e})}}):null};var It=function(){return c.a.createElement(S.a,null,c.a.createElement(Z,null),c.a.createElement(Ot,{exact:!0,path:"/",component:ae}),c.a.createElement(Ot,{restricted:!0,exact:!0,path:"/signin",component:D}),c.a.createElement(vt,{exact:!0,path:"/admin",component:ne}),c.a.createElement(vt,{exact:!0,path:"/profile",component:jt}),c.a.createElement(vt,{exact:!0,path:"/table",component:kt}),c.a.createElement(vt,{exact:!0,path:"/table/:tableName",component:wt}))},Rt=a(92),Tt={user:{},tables:[]};var Dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(m.a)({},e,{user:t.user});case"SET_TABLES":return Object(m.a)({},e,{tables:t.tables});case"DELETE_TABLE":var a=ut.a.filter(e.tables,(function(e){return e.firebaseId!==t.table.firebaseId}));return Object(m.a)({},e,{tables:a});case"ADD_TABLE":return Object(m.a)({},e,{tables:[].concat(Object(Re.a)(e.tables),[t.table])});case"UPDATE_TABLE":var n=ut.a.cloneDeep(e.tables),r=ut.a.find(n,(function(e){return e.firebaseId===t.table.firebaseId}));return r.name=t.table.name,Object(m.a)({},e,{tables:n});default:return e}},St=Object(Rt.d)(Dt);i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(R.a,{store:St},c.a.createElement(It,null))),document.getElementById("root"))}},[[414,1,2]]]);
//# sourceMappingURL=main.9cb9b904.chunk.js.map